{% extends "layout.html" %}
{% block title %}Boxplot{% endblock %}
{% block head %}
{{ super() }}
<!-- DataTables -->
<link rel="stylesheet" href="/static/assets/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" href="/static/assets/plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
<link rel="stylesheet" href="/static/assets/plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
<!-- Theme style -->
<link rel="stylesheet" href="/static/assets/css/adminlte.min.css">
<style>
    #container {
        height: 400px;
    }

    .highcharts-figure,
    .highcharts-data-table table {
        min-width: 310px;
        max-width: 700px;
        margin: 1em auto;
    }

    .highcharts-data-table table {
        font-family: Verdana, sans-serif;
        border-collapse: collapse;
        border: 1px solid #EBEBEB;
        margin: 10px auto;
        text-align: center;
        width: 100%;
        max-width: 500px;
    }

    .highcharts-data-table caption {
        padding: 1em 0;
        font-size: 1.2em;
        color: #555;
    }

    .highcharts-data-table th {
        font-weight: 600;
        padding: 0.5em;
    }

    .highcharts-data-table td,
    .highcharts-data-table th,
    .highcharts-data-table caption {
        padding: 0.5em;
    }

    .highcharts-data-table thead tr,
    .highcharts-data-table tr:nth-child(even) {
        background: #f8f8f8;
    }

    .highcharts-data-table tr:hover {
        background: #f1f7ff;
    }
</style>
{% endblock %}
{% block body_class %} sidebar-mini sidebar-collapse{% endblock body_class %}
{% block content %}
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
        <h1>Boxplot</h1>
        <div class="col-sm-4">
            <form class="row g-3" action="{{ url_for('reporte_boxplot') }}" method="GET">
                <div class="form-group">
                    <label for="inputState" class="form-label">Seleccionar Año</label>
                    <input name=boxplot class="form-control" type="number" min="2000" max="2021" step="1"
                        value="2021" />
                </div>
                <div class="col-12">
                    <button type="submit" class="btn btn-primary">Buscar</button>
                </div>
            </form>
        </div>

    </div>
    {% block scripts %}
    <script type="text/javascript">
        var min = parseInt("{{min}}", 10)
        var max = parseInt("{{max}}", 10)
        var q1 = parseInt("{{q1}}", 10)
        var q2 = parseInt("{{q2}}", 10)
        var q3 = parseInt("{{q3}}", 10)
        var anio = parseInt("{{anio}}", 10)
        Highcharts.chart('container', {

            chart: {
                type: 'boxplot'
            },

            title: {
                text: 'Demora desde la toma de muestra a la entrega de resultado'
            },

            legend: {
                enabled: false
            },

            xAxis: {
                categories: ["Año"],
                title: {
                    text: anio
                }
            },

            yAxis: {
                title: {
                    text: 'Días'
                },
                plotLines: [{
                    color: 'red',
                    width: 1,
                    label: {
                        text: 'Theoretical mean: 932',
                        align: 'center',
                        style: {
                            color: 'gray'
                        }
                    }
                }]
            },

            series: [{
                name: 'Observaciones',
                data: [
                    [min, q1, q2, q3, max]
                ],
                tooltip: {
                    headerFormat: '<em>Demora por {point.key}</em><br/>'
                }
            }]

        });
    </script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>

    <figure class="highcharts-figure">
        <div id="container"></div>
        <p class="highcharts-description">
        </p>
    </figure>

    {% endblock %}
</div>
{% endblock %}